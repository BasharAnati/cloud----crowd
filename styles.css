/* =========================
   Base / Reset
   ========================= */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Tajawal', sans-serif;
}

body {
    background-color: #f4f7fa;
    color: #333;
    line-height: 1.6;
}

/* =========================
   Navbar
   ========================= */
.navbar {
    position: sticky;
    top: 0;
    z-index: 90;
    display: flex;
    align-items: center;
    gap: 16px;
    justify-content: space-between;
    padding: 14px 20px;
    background: linear-gradient(90deg, rgba(14,58,120,0.95), rgba(12,40,90,0.95));
    color: white;
    box-shadow: 0 6px 18px rgba(2,6,23,.15);
    backdrop-filter: blur(6px);
}

.brand { display: flex; gap: 12px; align-items: center; }

.logo {
    width: 44px;
    height: 44px;
    border-radius: 10px;
    background: linear-gradient(135deg, var(--sky, #38bdf8), var(--accent, #8b5cf6));
    display: grid;
    place-items: center;
    color: white;
    font-weight: 700;
    box-shadow: 0 6px 18px rgba(139,92,246,0.2);
    transform: translateY(0);
    transition: transform 0.3s ease;
}
.logo:hover { transform: translateY(-3px) rotate(-4deg); }

.brand h1 {
    font-size: 18px;
    margin: 0;
    font-weight: 700;
    letter-spacing: 0.2px;
    color: white;
}
.brand p { margin: 0; font-size: 12px; color: rgba(255,255,255,0.9); }

.controls { display: flex; gap: 10px; align-items: center; }
.btn {
    border: none; cursor: pointer; padding: 8px 12px; border-radius: 9px;
    background: rgba(255,255,255,0.08); color: white; font-weight: 600; font-size: 13px;
    transition: all 0.3s ease; display: inline-flex; gap: 8px; align-items: center;
}
.btn:hover { transform: translateY(-3px); box-shadow: 0 4px 6px rgba(0,0,0,0.1); }

/* شعار وسط النافبار (اختياري) */
.nav-center-logo{
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    height: 149px;
    object-fit: contain;
    pointer-events: none;
    user-select: none;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,.25));
}

/* =========================
   Generic layout blocks
   ========================= */
.quote {
    text-align: center;
    padding: 20px;
    background-color: #e0e7ff;
    color: #1e3a8a;
    font-style: italic;
    font-size: 18px;
    margin: 20px;
    border-radius: 8px;
}

.container { max-width: 1200px; margin: 0 auto; padding: 20px; }

.sections {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
}

.section-card {
    background-color: white;
    border-radius: 8px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
    cursor: pointer;
}
.section-card:hover { transform: translateY(-5px); }
.section-card h2 { color: #1e3a8a; margin-bottom: 10px; }
.section-card p  { color: #666; }

.ticket-list { display: block; }

/* =========================
   Buttons row
   ========================= */
.buttons-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 20px;
    gap: 20px;
}

.add-ticket-btn, .back-btn {
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    min-width: 150px;
    text-align: center;
}
.add-ticket-btn { background-color: #16a34a; }
.back-btn       { background-color: #dc2626; margin-right: auto; }
.add-ticket-btn:hover { background-color: #22c55e; }
.back-btn:hover       { background-color: #ef4444; }

/* =========================
   Modal
   ========================= */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background-color: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}
.modal-content {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    width: 90%;
    max-width: 600px;
    max-height: 80vh;
    overflow-y: auto;
}
.modal-content h2 { color: #1e3a8a; margin-bottom: 20px; }
.form-group { margin-bottom: 15px; }
.form-group label {
    display: block;
    margin-bottom: 5px;
    color: #1e3a8a;
}
.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 14px;
}
.form-group input[type="file"] { padding: 3px; }
.file-preview {
    margin-top: 10px; max-width: 100%; max-height: 100px; display: none;
}

/* Multi-select */
.multi-select { position: relative; width: 100%; }
.multi-select .selected{
    border: 1px solid #ddd; border-radius: 5px; padding: 8px; min-height: 36px;
    display: flex; flex-wrap: wrap; align-items: center; cursor: pointer; background-color: white;
}
.multi-select .selected span{
    background-color: #e0e7ff; color: #1e3a8a; padding: 2px 8px; margin: 2px;
    border-radius: 12px; display: flex; align-items: center;
}
.multi-select .selected span button{
    margin-left: 5px; background: none; border: none; color: #dc2626; cursor: pointer;
}
.multi-select .dropdown{
    display: none; position: absolute; top: 100%; left: 0; width: 100%;
    background-color: white; border: 1px solid #ddd; border-radius: 5px;
    max-height: 200px; overflow-y: auto; z-index: 10; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.multi-select .dropdown label{ display: block; padding: 8px; cursor: pointer; }
.multi-select .dropdown label:hover{ background-color: #f4f7fa; }
.multi-select.open .dropdown{ display: block; }

/* Form actions */
.form-actions{ text-align: left; margin-top: 20px; }
.form-actions button{
    padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;
}
.submit-btn{ background-color: #1e3a8a; color: white; }
.cancel-btn{ background-color: #dc2626; color: white; }

.no-tickets { text-align: center; color: #666; font-size: 18px; margin: 40px 0; }

.edit-btn{
    background-color: #1e3a8a; color: white; padding: 8px 16px; border: none; border-radius: 5px;
    cursor: pointer; font-size: 14px; margin-top: 10px; width: 100%;
}
.edit-btn:hover { background-color: #2563eb; }

/* تفاصيل مخفية داخل البطاقة (نستخدم Drawer) */
.ticket-details{
    display: none; padding: 15px; background: #fff; border-radius: 8px; margin-top: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1); border: 1px solid #e2e8f0;
}
.ticket-details p{ margin-bottom: 8px; }
.ticket-details strong{ color: #1e3a8a; }

/* =========================
   Kanban (Compact)
   ========================= */

/* صف واحد للأعمدة + سكرول أفقي */
#tickets{
    display: flex;
    gap: 14px;
    flex-wrap: nowrap;
    overflow-x: auto;
    padding: 4px 2px 8px;
}

/* عمود بعرض w-72 = 288px (أصغر كما طلبت) */
section.group{
    flex: 0 0 288px;
    display: flex; flex-direction: column;
    background: #fff;
    padding: 10px;
    border-radius: 14px;
    box-shadow: 0 1px 6px rgba(2,6,23,.08);
    max-height: calc(100vh - 170px);
    overflow-y: auto;
}

/* هيدر العمود على شكل Pill */
.col-header{
    background: transparent; padding: 0; border-radius: 0; margin: 0 0 6px 0;
}
.col-header-inner{
    display: flex; align-items: center; justify-content: space-between; gap: 8px;
    width: 100%; padding: 8px 10px; background: #e5e7eb; color: #0f172a; border-radius: 999px;
}
.col-title{
    display: flex; align-items: center; width: 100%; padding: 6px 10px;
    border-radius: 8px; border: 1px solid transparent; color: #111827; font-weight: 800; font-size: 13px;
}
.col-right{ display: inline-flex; align-items: center; gap: 6px; }
.col-sort{ display: inline-flex; align-items: center; justify-content: center; cursor: pointer; border-radius: 999px; padding: 2px; line-height: 0; }
.col-sort:hover{ background: rgba(255,255,255,.8); }
.col-count{
    display: inline-flex; align-items: center; justify-content: center;
    min-width: 22px; height: 22px; padding: 0 8px; border-radius: 999px;
    background: #ffffff; border: 1px solid #dbe3f1; color: #0f172a;
    font-size: 12px; font-weight: 800; line-height: 22px;
}

/* خط باهت تحت الهيدر */
.col-underbar{
    height: 8px;
    border-radius: 999px;
    background: #e7eef9;
    margin: 6px 6px 10px;
}

/* بطاقة تذكرة مضغوطة */
.ticket-card{
    background: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.04);
    margin-bottom: 10px;
    cursor: pointer;
    transition: transform .12s ease, box-shadow .12s ease;
    padding: 0;   /* نتحكم بالمحتوى داخلياً */
}
.ticket-card:hover{ transform: translateY(-1px); box-shadow: 0 6px 14px rgba(2,6,23,.10); }

/* شريط علوي رفيع ملوّن */
.ticket-card .card-top{ height: 6px; border-radius: 10px 10px 0 0; background: #e5e7eb; }

/* رأس البطاقة: شِب + وقت */
.card-head{
    display: flex; justify-content: space-between; align-items: center;
    padding: 6px 10px 0 10px;
}
.chip{
    display: inline-block; padding: 1px 7px; font-size: 11px; font-weight: 900;
    border-radius: 6px; color: #fff; background: #ff7a00; letter-spacing: .3px;
}
.card-time{ font-size: 11px; font-weight: 800; color: #475569; }

/* متن البطاقة */
.card-main{ padding: 6px 10px 8px 10px; font-size: 13px; line-height: 1.4; }
.card-main p{ margin: 3px 0; }
.card-main strong{ color: #1e3a8a; }
.card-foot{ margin-top: 4px; display: flex; justify-content: flex-end; }
.card-case{ font-size: 11px; font-weight: 700; color: #475569; }

/* عدم إظهار التفاصيل داخل البطاقة */
.ticket-card .ticket-details{ display: none !important; }

/* ألوان الشريط حسب الحالة */
.status { padding: 5px 10px; border-radius: 12px; color: #fff; font-size: 13px; display: inline-flex; align-items: center; margin-bottom: 10px; position: relative; font-weight: 600; }
.status-number{
    background: rgba(255,255,255,0.8); color:#333; border-radius: 50%;
    width: 18px; height: 18px; font-size: 12px; font-weight: 700; display: inline-flex;
    justify-content: center; align-items: center; margin-inline-start: 8px; user-select: none;
}

/* نفس الألوان التي كانت لديك */
.ticket-card.status-taken .card-top { background-color: #1a9324; }
.ticket-card.status-active .card-top { background-color: #1b16a3; }
.ticket-card.status-not-active .card-top { background-color: #f91616; }
/* .status-open { background-color:#9333ea; }  .status-follow-up-needed { background:#d97706; } .status-no-response { background:#64748b; } */
.ticket-card.status-call-back-scheduled .card-top { background-color: #0d9488; }
.ticket-card.status-in-progress .card-top { background-color: #2563eb; }
.ticket-card.status-escalated .card-top { background-color: #1b16a3; }
.ticket-card.status-resolved .card-top { background-color: #059669; }
.ticket-card.status-perfect-feedback .card-top { background-color: #65a30d; }
.ticket-card.status-no-call-needed .card-top { background-color: #676464; }
.ticket-card.status-pending-call .card-top { background-color: #1b16a3; }
.ticket-card.status-called-no-answer .card-top { background-color: #a7bb13; }
.ticket-card.status-called-customer-refused-return .card-top { background-color: #f91616; }
.ticket-card.status-scheduled-for-pickup .card-top { background-color: #2a2379; }
.ticket-card.status-scheduled-for-delivery .card-top { background-color: #2a2379; }
.ticket-card.status-issue-needs-follow-up .card-top { background-color: #b45309; }
.ticket-card.status-returned .card-top { background-color: #047857; }
.ticket-card.status-closed .card-top { background-color: #15803d; }
.ticket-card.status-under-review .card-top { background-color: #1b16a3; }

/* شارة رقم القضية الموحدة */
.case-badge {
  background: rgba(255,255,255,0.85);
  color: #111;
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 12px;
  font-weight: 700;
  display: inline-block;
  margin-left: 8px;
  line-height: 1.2;
}

/* =========================
   Drawer (Side details panel)
   ========================= */
body.drawer-open { overflow: hidden; }

.drawer { position: fixed; inset: 0; display: none; z-index: 1200; }
.drawer.open { display: block; }

.drawer-backdrop{
  position: absolute; inset: 0; background: rgba(0,0,0,.45);
  backdrop-filter: blur(1.5px); opacity: 0; transition: opacity .25s ease;
}
.drawer.open .drawer-backdrop{ opacity: 1; }

.drawer-panel{
  position: absolute; top: 0; right: 0; width: min(480px,100%); height: 100%;
  background: #fff; box-shadow: -10px 0 30px rgba(2,6,23,.25);
  transform: translateX(100%); transition: transform .28s ease;
  display: flex; flex-direction: column;
}
.drawer.open .drawer-panel{ transform: translateX(0); }

.drawer-header{
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 14px; border-bottom: 1px solid #e5e7eb;
}
.drawer-header h2{ margin: 2px 0 0; font-size: 18px; color: #0f172a; }
.drawer-case{ font-size: 11px; color: #475569; letter-spacing: .3px; }

.drawer-close{
  background: transparent; border: none; font-size: 26px; line-height: 1;
  cursor: pointer; color: #334155; padding: 0 6px; border-radius: 8px;
}
.drawer-close:hover{ background: #f1f5f9; }

.drawer-meta{
  display: grid; grid-template-columns: repeat(2, minmax(0,1fr));
  gap: 6px 12px; padding: 12px 14px; border-bottom: 1px solid #e5e7eb; background: #f8fafc;
}
.drawer-meta .meta-item strong{ color: #1e3a8a; }
.meta-badge{
  display: inline-block; padding: 3px 9px; border-radius: 999px;
  background: #1e3a8a; color: #fff; font-size: 11px; font-weight: 700;
}

.drawer-body{ padding: 12px 14px 8px; overflow: auto; flex: 1 1 auto; }
.drawer-body p{ margin-bottom: 8px; }
.drawer-body strong{ color: #1e3a8a; }
.drawer-actions{ padding: 12px 14px 14px; border-top: 1px solid #e5e7eb; }

/* =========================
   Responsive
   ========================= */
@media (max-width: 600px) {
    .sections { grid-template-columns: 1fr; }
    .section-card { padding: 15px; }

    .buttons-container{
        flex-direction: column; align-items: stretch; gap: 10px;
    }
    .add-ticket-btn, .back-btn { margin-right: 0; margin-bottom: 10px; }

    section.group{ flex: 0 0 86vw; }
}


/* === KANBAN COMPACT + NO COLUMN CARD + HIDE H SCROLL === */

/* أصغّر الأعمدة وأقلّل المسافات */
#tickets{
  gap: 10px !important;
  padding: 2px 2px 6px !important;
  /* إخفاء الشريط الأفقي */
  scrollbar-width: none;          /* Firefox */
}
#tickets::-webkit-scrollbar{      /* Chrome/Edge/Safari */
  height: 0 !important;
}

/* العمود بدون كارد أبيض ولا ظل */
section.group{
  flex: 0 0 248px !important;     /* عرض العمود أصغر (عدّل الرقم لو بدك) */
  background: transparent !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  padding: 0 4px !important;      /* فقط هامش جانبي بسيط */
  max-height: calc(100vh - 170px) !important;
  overflow-y: auto;
  scrollbar-width: thin;          /* شريط رأسي نحيف داخل العمود */
}
section.group::-webkit-scrollbar{
  width: 6px;
}

/* الهيدر كبِل كما هو لكن أصغر شوي */
.col-header-inner{
  padding: 6px 8px !important;
  border-radius: 999px !important;
  background: #e9edf6 !important;
}
.col-title{ font-size: 12.5px !important; font-weight: 800; }
.col-count{
  min-width: 20px; height: 20px; line-height: 20px;
  font-size: 11px; padding: 0 6px;
}

/* الخط الخفيف تحت الهيدر – نحيف */
.col-underbar{
  height: 6px !important;
  margin: 4px 6px 8px !important;
  background: #e9edf6 !important;
  border-radius: 999px;
}

/* بطاقة التكت أصغر وواضحة بذاتها (بدون خلفية عمود) */
.ticket-card{
  margin-bottom: 8px !important;
  border-radius: 10px !important;
  border: 1px solid #e6e9f0 !important;
  box-shadow: 0 1px 3px rgba(2,6,23,.05) !important;
}
.ticket-card .card-top{ height: 5px !important; border-radius: 10px 10px 0 0; }
.card-head{ padding: 6px 8px 0 8px !important; }
.card-time{ font-size: 11px !important; }
.card-main{ padding: 6px 8px 8px 8px !important; font-size: 12.5px !important; }
.card-case{ font-size: 11px !important; }

/* لمسات بصرية خفيفة للتباعد تحت كل عمود (اختياري) */
section.group::after{
  content:''; display:block; height:2px; margin-top:2px; opacity:.0;
}

/* === Disable inner column scroll; use page scroll only === */
section.group{
  max-height: none !important;   /* خلي العمود يتمدد بطوله الطبيعي */
  overflow-y: visible !important; /* إلغاء سكرول العمود */
  scrollbar-width: none !important;  /* Firefox */
}
section.group::-webkit-scrollbar{    /* Chrome/Edge/Safari */
  width: 0 !important;
  height: 0 !important;
}


/* === SUPER COMPACT STATUSES + UNIFIED FRAMES === */

/* صف الأعمدة: فجوة أصغر */
#tickets{
  gap: 8px !important;
  padding: 2px 2px 6px !important;
}

/* كل الأعمدة بنفس العرض تمامًا وأضيق */
section.group{
  flex: 0 0 220px !important;   /* <-- صغّرناها (غيّر الرقم لو بدك) */
  padding: 0 4px !important;
}

/* الهيدر كبِل أصغر، بارتفاع ثابت، ويمنع تخريب النص الطويل */
.col-header-inner{
  padding: 4px 8px !important;
  border-radius: 999px !important;
  background: #e9edf6 !important;
  min-height: 30px !important;          /* ارتفاع موحّد للهيدر */
  display: flex; align-items: center;
}
.col-title{
  font-size: 12px !important;
  font-weight: 800 !important;
  padding: 0 !important;
  /* منع العناوين الطويلة من كسر التصميم (Thyme Table Plates) */
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  max-width: calc(100% - 54px);  /* يترك مساحة للأيقونة والعداد */
}
.col-right{ gap: 4px !important; }
.col-count{
  min-width: 18px !important; height: 18px !important; line-height: 18px !important;
  font-size: 10.5px !important; padding: 0 6px !important;
}

/* خط تحت الهيدر أنحف وبنفس المسافة لكل الأعمدة */
.col-underbar{
  height: 5px !important;
  margin: 4px 6px 8px !important;
  background: #e9edf6 !important;
  border-radius: 999px !important;
}

/* بطاقات التكت أصغر وثابتة العرض داخل العمود */
.ticket-card{
  width: 100% !important;
  margin-bottom: 6px !important;
  border-radius: 9px !important;
  border: 1px solid #e6e9f0 !important;
  box-shadow: 0 1px 2px rgba(2,6,23,.05) !important;
}
.ticket-card .card-top{ height: 4px !important; }
.card-head{ padding: 4px 8px 0 8px !important; }
.chip{ font-size: 10.5px !important; padding: 1px 6px !important; }
.card-time{ font-size: 10.5px !important; }
.card-main{ padding: 4px 8px 6px 8px !important; font-size: 12px !important; line-height: 1.35 !important; }
.card-case{ font-size: 10.5px !important; }

/* توحيد الحافات السفلية تحت كل عمود لمظهر نظيف */
section.group::after{
  content: ""; display: block; height: 2px; margin-top: 2px; opacity: 0;
}

/* (اختياري) لو بدك الأعمدة تكون أضيق أكثر على الشاشات الصغيرة */
@media (max-width: 1024px){
  section.group{ flex-basis: 200px !important; }
}


/* تعديل عرض الأعمدة للـ Statuses ليكون 170px */
section.group{
  flex: 0 0 170px !important;
  background: transparent !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  padding: 0 4px !important;
  max-height: none !important;         /* ما في سكرول داخلي */
  overflow-y: visible !important;
  scrollbar-width: none !important;
}
section.group::-webkit-scrollbar{ width:0 !important; height:0 !important; }

/* عشان الأعمدة تلفّ على أكثر من سطر */
#tickets{
  flex-wrap: wrap !important;
  gap: 8px !important;
  padding: 2px 2px 6px !important;
  overflow-x: hidden !important;
}

@media (max-width: 820px){
    .nav-center-logo{ height: 32px; }
}
